<body style="background-image: url(../Images/Gordo_Barbudo.png);">
  <form id="registerForm" method="POST">
    <input type="text" name="nombre" placeholder="Nombre" required />
    <input type="email" name="correo" placeholder="Correo" required />
    <input type="number" name="peso" placeholder="Peso (kg)" required />
    <input type="password" name="contrasena" placeholder="Contrasena" required />
    <button type="submit">Registrarse</button>
  </form>

  <script>
  const form = document.getElementById("registerForm");
  form.addEventListener("submit", async (ev) => {
    ev.preventDefault();

    const data = {
      nombre: form.nombre.value,
      correo: form.correo.value,
      peso: form.peso.value,
      contrasena: form.contrasena.value
    };

    try {
      const res = await fetch("/.netlify/functions/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      if (!res.ok) {
        const err = await res.text();
        alert("Error en registro: " + err);
        return;
      }

      // Si todo salió bien → ir al index con ?ok=1
      window.location.href = "../index.html?ok=1";
    } catch (err) {
      alert("Fallo la conexión con el servidor: " + err.message);
    }
  });
  </script>
</body>
